<!-- SmartCodePrompts/modal-setup.html -->
<dialog id="setup_modal" class="modal">
	<div class="modal-box w-11/12 max-w-4xl h-5/6 flex flex-col">
		<form method="dialog">
			<button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
		</form>
		<h3 class="font-bold text-lg flex-shrink-0">Application Setup</h3>
		<div class="flex-grow overflow-y-auto py-4">
			<div id="setup-loading-indicator" class="text-center p-5">
				<span class="loading loading-spinner loading-lg"></span>
			</div>
			
			<form id="setup-form" style="display: none;" class="space-y-6">
				<div class="form-control">
					<label class="label" for="allowed-extensions-input"><span
						class="label-text">Allowed File Extensions</span></label>
					<textarea class="textarea textarea-bordered font-mono" id="allowed-extensions-input" rows="4"
					          placeholder="Enter extensions separated by commas. e.g., js, php, py, html"></textarea>
					<label class="label"><span class="label-text-alt">Only files with these extensions will be shown.</span></label>
				</div>
				
				<div class="form-control">
					<label class="label" for="excluded-folders-input"><span class="label-text">Excluded Folders</span></label>
					<textarea class="textarea textarea-bordered font-mono" id="excluded-folders-input" rows="3"
					          placeholder="Enter folder names separated by commas. e.g., .git, node_modules, vendor"></textarea>
					<label class="label"><span class="label-text-alt">These folders will be ignored entirely.</span></label>
				</div>
				
				<div class="form-control">
					<label class="label" for="openrouter-api-key-input"><span class="label-text">OpenRouter API Key</span></label>
					<input type="password" class="input input-bordered font-mono" id="openrouter-api-key-input"
					       placeholder="sk-or-...">
					<label class="label"><span
						class="label-text-alt">Your API key for making requests to OpenRouter.ai for analysis.</span></label>
				</div>
				
				<div class="divider"></div>
				<h4 class="text-xl font-bold">LLM Prompts</h4>
				<div role="alert" class="alert">
					<span>Use <code>${file_path}</code> and <code>${file_content}</code> as placeholders in analysis prompts.</span>
				</div>
				
				<div class="form-control">
					<label class="label" for="prompt-file-overview-input"><span
						class="label-text">File Overview Prompt</span></label>
					<textarea class="textarea textarea-bordered font-mono h-32" id="prompt-file-overview-input"></textarea>
				</div>
				
				<div class="form-control">
					<label class="label" for="prompt-functions-logic-input"><span
						class="label-text">Functions & Logic Prompt</span></label>
					<textarea class="textarea textarea-bordered font-mono h-32" id="prompt-functions-logic-input"></textarea>
				</div>
				
				<div class="form-control">
					<label class="label" for="prompt-content-footer-input"><span
						class="label-text">Content Footer Prompt</span></label>
					<textarea class="textarea textarea-bordered font-mono h-32" id="prompt-content-footer-input"></textarea>
					<label class="label"><span class="label-text-alt">This text is appended to the main prompt when you combine multiple files.</span></label>
				</div>
				
				<div class="form-control">
					<label class="label" for="prompt-smart-prompt-input"><span
						class="label-text">Smart Prompt Builder Prompt</span></label>
					<textarea class="textarea textarea-bordered font-mono h-32" id="prompt-smart-prompt-input"></textarea>
					<label class="label"><span
						class="label-text-alt">Use <code>${user_prompt}</code> and <code>${analysis_data_string}</code> as placeholders.</span></label>
				</div>
				
				<div class="form-control">
					<label class="label" for="prompt-auto-select-input"><span
						class="label-text">Auto-Select Project Files Prompt</span></label>
					<textarea class="textarea textarea-bordered font-mono h-32" id="prompt-auto-select-input"></textarea>
					<label class="label"><span
						class="label-text-alt">Use <code>${file_list_string}</code> as a placeholder. This prompt helps the LLM decide which files are part of your core project.</span></label>
				</div>
			</form>
		</div>
		<div class="modal-action flex-shrink-0 border-t border-base-300 pt-4">
			<button type="button" id="reset-prompts-btn" class="btn btn-warning">Reset Prompts</button>
			<form method="dialog" class="ml-auto">
				<button class="btn">Close</button>
			</form>
			<button type="button" id="save-setup-button" class="btn btn-success">Save Configuration</button>
		</div>
	</div>
</dialog>
