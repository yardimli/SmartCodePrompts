<!DOCTYPE html>
<!-- MODIFIED: Added data-theme for DaisyUI -->
<html lang="en" data-theme="light">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Application Setup</title>
	<link href="/node_modules/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
	<link rel="stylesheet" href="/dist/output.css">
	<script type="module" src="js/setup.js"></script>
</head>
<body>
<div class="container mx-auto px-4 mt-4">
	<header class="flex justify-between items-center py-3 mb-4 border-b border-base-300">
		<h1 class="text-2xl font-bold">Application Setup</h1>
		<div class="flex items-center gap-2">
			<button id="toggle-mode" class="btn btn-outline">
				<i class="fas fa-sun"></i>
			</button>
			<a href="/" class="btn btn-primary">Back to Prompt Builder</a>
		</div>
	</header>
	<main>
		<div id="loading-indicator" class="text-center p-5">
			<span class="loading loading-spinner loading-lg"></span>
		</div>

		<form id="setup-form" style="display: none;" class="space-y-6">
			<div role="alert" class="alert alert-info">
				<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
				     class="stroke-current shrink-0 w-6 h-6">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
					      d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
				</svg>
				<span><strong>Note:</strong> Changes to the <strong>Server Port</strong> require a manual restart of the server.</span>
			</div>
			
			<div class="form-control">
				<label class="label" for="root-directories-input"><span class="label-text">Root Directories</span></label>
				<textarea class="textarea textarea-bordered font-mono" id="root-directories-input" rows="4"
				          placeholder="Enter one full directory path per line. e.g., C:/Users/YourUser/Projects"></textarea>
				<label class="label"><span class="label-text-alt">The top-level directories to scan for projects. One per line.</span></label>
			</div>
			
			<div class="form-control">
				<label class="label" for="allowed-extensions-input"><span
					class="label-text">Allowed File Extensions</span></label>
				<textarea class="textarea textarea-bordered font-mono" id="allowed-extensions-input" rows="4"
				          placeholder="Enter extensions separated by commas. e.g., js, php, py, html"></textarea>
				<label class="label"><span class="label-text-alt">Only files with these extensions will be shown.</span></label>
			</div>
			
			<div class="form-control">
				<label class="label" for="excluded-folders-input"><span class="label-text">Excluded Folders</span></label>
				<textarea class="textarea textarea-bordered font-mono" id="excluded-folders-input" rows="3"
				          placeholder="Enter folder names separated by commas. e.g., .git, node_modules, vendor"></textarea>
				<label class="label"><span class="label-text-alt">These folders will be ignored entirely.</span></label>
			</div>
			
			<div class="form-control">
				<label class="label" for="server-port-input"><span class="label-text">Server Port</span></label>
				<input type="number" class="input input-bordered font-mono" id="server-port-input" placeholder="e.g., 3000">
				<label class="label"><span
					class="label-text-alt">The port the application server runs on. Requires a restart.</span></label>
			</div>
			
			<div class="form-control">
				<label class="label" for="openrouter-api-key-input"><span class="label-text">OpenRouter API Key</span></label>
				<input type="password" class="input input-bordered font-mono" id="openrouter-api-key-input"
				       placeholder="sk-or-...">
				<label class="label"><span
					class="label-text-alt">Your API key for making requests to OpenRouter.ai for analysis.</span></label>
			</div>
			
			<div class="divider"></div>
			<h4 class="text-xl font-bold">LLM Prompts</h4>
			<div role="alert" class="alert">
				<span>Use <code>${filePath}</code> and <code>${fileContent}</code> as placeholders in analysis prompts.</span>
			</div>
			
			<div class="form-control">
				<label class="label" for="prompt-file-overview-input"><span
					class="label-text">File Overview Prompt</span></label>
				<textarea class="textarea textarea-bordered font-mono h-32" id="prompt-file-overview-input"></textarea>
			</div>
			
			<div class="form-control">
				<label class="label" for="prompt-functions-logic-input"><span
					class="label-text">Functions & Logic Prompt</span></label>
				<textarea class="textarea textarea-bordered font-mono h-32" id="prompt-functions-logic-input"></textarea>
			</div>
			
			<div class="form-control">
				<label class="label" for="prompt-content-footer-input"><span
					class="label-text">Content Footer Prompt</span></label>
				<textarea class="textarea textarea-bordered font-mono h-32" id="prompt-content-footer-input"></textarea>
				<label class="label"><span class="label-text-alt">This text is appended to the main prompt when you combine multiple files.</span></label>
			</div>
			
			<div class="form-control">
				<label class="label" for="prompt-smart-prompt-input"><span
					class="label-text">Smart Prompt Builder Prompt</span></label>
				<textarea class="textarea textarea-bordered font-mono h-32" id="prompt-smart-prompt-input"></textarea>
				<label class="label"><span
					class="label-text-alt">Use <code>${userPrompt}</code> and <code>${analysisDataString}</code> as placeholders.</span></label>
			</div>
			
			<div class="flex gap-2">
				<button type="submit" class="btn btn-success">Save Configuration</button>
				<button type="button" id="reset-prompts-btn" class="btn btn-warning">Reset Prompts to Default</button>
			</div>
		</form>
	</main>
</div>
</body>
</html>
